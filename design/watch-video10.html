<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>watch</title>

   <!-- font awesome cdn link  -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">

   <!-- custom css file link  -->
   <link rel="stylesheet" href="css/style.css">

</head>
<body>

<header class="header">
   <section class="flex">
      <a href="home.html" class="logo">
         <img src="images/risers.jpg" alt="Risers Edu Logo" style="border-radius: 8px;">
      </a>

      <form action="search.html" method="post" class="search-form">
         <input type="text" name="search_box" required placeholder="search courses..." maxlength="100">
         <button type="submit" class="fas fa-search"></button>
      </form>

      <div class="icons">
         <div id="menu-btn" class="fas fa-bars"></div>
         <div id="search-btn" class="fas fa-search"></div>
         <div id="user-btn" class="fas fa-user"></div>
         <div id="toggle-btn" class="fas fa-sun"></div>
         <a href="#" onclick="logout()" class="option-btn">logout</a>
      </div>

      <div class="profile">
         <img id="headerProfilePic" src="images/pic-1.jpg" class="image" alt="">
         <h3 id="headerProfileName" class="name">Guest</h3>
         <p id="headerProfileEmail" class="role">student</p>
         <a href="profile.html" class="btn">view profile</a>
      </div>
   </section>
</header>   

<div class="side-bar">
   <div id="close-btn"><i class="fas fa-times"></i></div>
   <div class="profile">
      <img id="sideProfilePic" src="images/pic-1.jpg" class="image" alt="">
      <h3 id="sideProfileName" style="color: rgb(206, 130, 15);font-size: 20px;">Guest</h3>
      <p class="role">student</p>
      <a href="profile.html" class="btn">view profile</a>
   </div>
   <nav class="navbar">
      <a href="home.html"><i class="fas fa-home"></i><span>home</span></a>
      <a href="about.html"><i class="fas fa-question"></i><span>about</span></a>
      <a href="courses.html"><i class="fas fa-graduation-cap"></i><span>courses</span></a>
      <a href="teachers.html"><i class="fas fa-chalkboard-user"></i><span>teachers</span></a>
      <a href="doubt.html"><i class="fas fa-lightbulb"></i><span>ask doubt</span></a>
      <a href="contact.html"><i class="fas fa-headset"></i><span>contact us</span></a>
   </nav>
</div>

<section class="watch-video">
   <div class="video-container">
      <div class="video">
         <video src="images/vid-10.mp4" controls poster="images/chemsestry.webp" id="video"></video>
      </div>
      <h3 class="title">complete Chemistry tutorial class 12th</h3>
      <div class="info">
         <p class="date"><i class="fas fa-calendar"></i><span>22-10-2025</span></p>
         <p class="date"><i class="fas fa-heart"></i><span>44 likes</span></p>
      </div>
      <div class="tutor">
         <img src="images/pic-6.jpg" alt="">
         <div>
            <h3>Ravi</h3>
            <span>Chemistry</span>
         </div>
      </div>
      <p class="description">
          Chemistry Tutorial Class 12th
      </p>
   </div>
</section>

<section class="comments">
   <h1 class="heading">Comments</h1>

   <form id="add-comment-form" class="add-comment">
      <h3>Add a comment</h3>
      <textarea id="comment-box" placeholder="Enter your comment" required maxlength="500" cols="30" rows="5"></textarea>
      <input type="submit" value="Add Comment" class="inline-btn">
   </form>

   <div id="comments-list" class="box-container"></div>
</section>

<footer class="footer">
   &copy; copyright @ 2025 by <span>Gov.Of Punjab</span> | all rights reserved!
</footer>

<script src="js/script.js"></script>
<script>
   // ---- Load user data ----
   const user = JSON.parse(localStorage.getItem('user'));
   if(user && user.name){
      document.getElementById('headerProfileName').innerText = user.name;
      document.getElementById('sideProfileName').innerText = user.name;
   }

   // ---- Logout ----
   function logout(){
      localStorage.removeItem('user');
      window.location.href = "login.html";
   }

   // ---- Comments ----
   const commentsForm = document.getElementById('add-comment-form');
   const commentsList = document.getElementById('comments-list');

   // Load saved comments from localStorage
   let comments = JSON.parse(localStorage.getItem('videoComments')) || [];

   function renderComments(){
      commentsList.innerHTML = '';
      if(comments.length === 0){
         commentsList.innerHTML = `<p style="text-align:center; padding:1rem;">No comments yet.</p>`;
         return;
      }
      comments.forEach((c, index) => {
         const div = document.createElement('div');
         div.classList.add('box');
         div.innerHTML = `
            <div class="user">
               <img src="${c.photo || 'images/pic-1.jpg'}" alt="">
               <div>
                  <h3>${c.name}</h3>
                  <span>${c.date}</span>
               </div>
            </div>
            <div class="comment-box">${c.text}</div>
            <form class="flex-btn">
               <input type="button" value="Edit" class="inline-option-btn" onclick="editComment(${index})">
               <input type="button" value="Delete" class="inline-delete-btn" onclick="deleteComment(${index})">
            </form>
         `;
         commentsList.appendChild(div);
      });
   }

   function saveComments(){
      localStorage.setItem('videoComments', JSON.stringify(comments));
   }

   commentsForm.addEventListener('submit', e => {
      e.preventDefault();
      const text = document.getElementById('comment-box').value.trim();
      if(!text) return;
      const now = new Date();
      const comment = {
         name: user?.name || 'Guest',
         photo: user?.photo || 'images/pic-1.jpg',
         text: text,
         date: now.toLocaleDateString()
      };
      comments.push(comment);
      saveComments();
      renderComments();
      commentsForm.reset();
   });

   function deleteComment(index){
      if(confirm('Are you sure you want to delete this comment?')){
         comments.splice(index, 1);
         saveComments();
         renderComments();
      }
   }

   function editComment(index){
      const newText = prompt('Edit your comment:', comments[index].text);
      if(newText !== null && newText.trim() !== ''){
         comments[index].text = newText.trim();
         saveComments();
         renderComments();
      }
   }

   // Initial render
   renderComments();
</script>

</body>
</html>
